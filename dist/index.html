<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Chat Viewer</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="loader.css" />
        <link rel="stylesheet" href="viewer.css" />
    </head>
    <body>
        <div id="loading-icon">
            <div class="lds-default"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
        </div>
        <div id="loader">
            <input id="json-file" type="file" title="Pick JSON File" />
            <span id="url-display"></span>
        </div>
        <div id="chat"></div>
        <div id="error"></div>
        <div id="controls">
            <div class="left">
                <button id="prev-page" title="Previous Page">&lt;</button>
                <span id="page-indicator">Page 1/1</span>
                <button id="next-page" title="Next Page">&gt;</button>
            </div>
            <div class="middle">
                <form id="filter-form" onsubmit="return false;">
                <span>Show</span>
                <select id="filter-type">
                    <option value="" selected>All Messages</option>
                    <option value="moderators">Mods / Owner Chats</option>
                    <option value="monetized">All Monetized (Super / Member)</option>
                    <option value="supers">Super Chats / Stickers</option>
                    <option value="memberships">Membership Joins / Gifts</option>
                    <option value="raids">Raid Messages</option>
                </select>
                <span>containing</span>
                <input id="search-text" type="text" />
                <button type="submit" id="apply-filters" title="Apply Filters">Apply</button>
                </form>
            </div>
            <div class="right">
                <button id="view-stats" type="button" title="Stats">View Stats</button>
            </div>
        </div>
        <div id="stats-shade"></div>
        <div id="stats" class="unfiltered">
            <button id="close-stats" title="Close Stats">X</button>
            <h2><span class="label">General Stats</span><span class="value">All Chats</span><span class="value">Filtered</span></h2>
            <div id="general-stats-body" class="stats-block"></div>
            <h2><span class="label">Monetization Stats</span><span class="value">All Chats</span><span class="value">Filtered</span></h2>
            <div id="monetization-stats-body" class="stats-block"></div>
            <h2><span class="label">Currency Totals</span><span class="value">All Chats</span><span class="value">Filtered</span></h2>
            <div id="currency-stats-head" class="stats-block">
                <div class="stats-row">
                    <span class="label">Estimated Total in USD*</span><span id="estimate-usd-all" class="value all"><button id="load-currencies" type="button" title="Check">Check</button></span><span id="estimate-usd-filtered" class="value filtered">-</span>
                </div>
            </div>
            <div id="currency-stats-body" class="stats-block"></div>
            <div class="footnote">*Estimated total does not include memberships, because YT does not publish their currency publicly, so the value could vary significantly.</div>
            <div class="footnote">*Estimates are converted using Bank of Canada's currency API.</div>
            <div class="footnote">*If any currencies were not recognized due to YT's labeling, they will appear as "(???)" and will not be added to the total; please contact AL.</div>
        </div>

        <script src="viewer.js" type="module"></script>
    </body>
</html>
