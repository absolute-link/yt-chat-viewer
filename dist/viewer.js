(()=>{var e={171:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChunksToLinesTransform=function(){let e="";return new TransformStream({transform:(t,n)=>{const s=e+t;e="";const r=s.split(/\r?\n/g);for(;r.length>1;)n.enqueue(r.shift());const i=r.shift();i&&(e=i)}})}},337:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.processChatMessage=function(e,t){const n=t.replayChatItemAction?.actions[0].addChatItemAction?.item;if(!n)return!1;let s,i="",l="",d=!1,f=!1,m=!1,g=!1,p=!1;if(n.liveChatSponsorshipsGiftPurchaseAnnouncementRenderer){const t=n.liveChatSponsorshipsGiftPurchaseAnnouncementRenderer,r=t.header.liveChatSponsorshipsHeaderRenderer;r.authorExternalChannelId=t.authorExternalChannelId;const i=parseInt((r.primaryText.runs||[])[1].text||"0");s=c(r),l+=function(e){let t='<span class="msg membership-gift system-message">';return t+='<span class="gift-icon">üéÅ</span>',t+=`<span class="text">${u(e)}</span>`,t+="</span>",t}(r.primaryText),g=!0,e.runningStats.numGiftPurchases++,e.runningStats.totalGiftsPurchased+=i}else if(n.liveChatSponsorshipsGiftRedemptionAnnouncementRenderer){const e=n.liveChatSponsorshipsGiftRedemptionAnnouncementRenderer;s=c(e),l+=h(e.message,["membership-received","system-message"]),p=!0}else if(n.liveChatMembershipItemRenderer){const e=n.liveChatMembershipItemRenderer;s=c(e),e.message?(l+=function(e,t){let n='<span class="msg membership-message">';return n+=`<span class="mem-length">${function(e){return u(e).replace(/^[^0-9]+/,"").replace(/months?/,"mo").replace(/years?/,"yr")}(e)}</span>`,n+=`<span class="text">${u(t)}</span>`,n+="</span>",n}(e.headerPrimaryText,e.message),i=u(e.message)):l+=h(e.headerSubtext,["membership-join","system-message"]),m=!0}else if(n.liveChatPaidMessageRenderer){const t=n.liveChatPaidMessageRenderer,r=a(t.bodyBackgroundColor),{currencyLabel:o,amount:h}=function(e){const t=u(e).match(/^([^0-9.,]*)([0-9.,]+)/);return t?{currencyLabel:(t[1]||"Unknown").trim(),amount:parseFloat(t[2].trim())}:{currencyLabel:"Unknown",amount:0}}(t.purchaseAmountText);s=c(t),l+=function(e,t){let n=`<span class="msg superchat ${t}">`;return n+=`<span class="money">${u(e.purchaseAmountText)}</span>`,e.message&&(n+=`<span class="text">${u(e.message)}</span>`),n+="</span>",n}(t,r),d=!0,i=u(t.message||""),e.runningStats.numSuperchats++,e.runningStats.colourTotals[r]||(e.runningStats.colourTotals[r]=0),e.runningStats.colourTotals[r]++,e.runningStats.currencyTotals[o]||(e.runningStats.currencyTotals[o]=0),e.runningStats.currencyTotals[o]+=h}else if(n.liveChatPaidStickerRenderer){const t=n.liveChatPaidStickerRenderer;s=c(t),l+=function(e){const t=a(e.backgroundColor),n=o(e.sticker.thumbnails),s=e.sticker.accessibility.accessibilityData.label;let r=`<span class="msg super-sticker ${t}">`;return r+=`<span class="money">${u(e.purchaseAmountText)}</span>`,n&&(r+=`<img class="sticker" src="${n.url}" alt="${s}">`),r+="</span>",r}(t),e.runningStats.numSuperStickers++,f=!0}else{if(!n.liveChatTextMessageRenderer)return!1;{const e=n.liveChatTextMessageRenderer;s=c(e),l+=h(e.message),i=u(e.message||"")}}let $="";return $+=function(e){const t=parseInt(e,10)||0,n=t>36e5?"H:mm:ss":"mm:ss";return`<span class="time offset">${r.default.duration(t).format(n)}</span>`}(t.replayChatItemAction?.videoOffsetTimeMsec||""),$+=function(e){return`<span class="${["user",...e.cssClasses].join(" ")}">\n            <a href="https://www.youtube.com/channel/${e.channelId}">${e.name}</a>\n        </span>\n    `}(s),$+=l,e.allChats.push({isMember:s.isMember,isMod:s.isMod,isOwner:s.isOwner,isSuperChat:d,isSuperSticker:f,isMembershipMessage:m,isMembershipGift:g,isMembershipRedemption:p,userName:s.name,textContent:i,htmlLine:$}),e.runningStats.numChatMessages++,!0};const r=s(n(353)),i=s(n(522));function a(e){const t=e.toString(),n={4279592384:"dark-blue",4280191205:"dark-blue",4278237396:"light-blue",4278248959:"light-blue",4278239141:"light-green",4280150454:"light-green",4294947584:"yellow",4294953512:"yellow",4293284096:"orange",4294278144:"orange",4290910299:"pink",4293467747:"pink",4291821568:"red",4293271831:"red"};return n[t]?n[t]:"unknown"}function o(e){let t=null;for(const n of e)t?(n.width||0)<(t.width||0)&&(t=n):t=n;return t}function u(e){return"string"==typeof e?e:e.simpleText?e.simpleText:e.runs?e.runs.map(e=>e.text?e.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.emoji?function(e){if(e.isCustomEmoji){const t=o(e.image.thumbnails);return t?`<img class="emoji" src="${t.url}" alt="${e.shortcuts[0]||""}">`:`<span class="emoji-text">${e.shortcuts[0]||""}</span>`}return e.emojiId}(e.emoji):"").join(""):""}function c(e){const t={channelId:e.authorExternalChannelId||"",isMember:!1,isMod:!1,isOwner:!1,cssClasses:[],name:u(e.authorName||"[Unknown Name]")};for(const n of e.authorBadges||[]){const e=n.liveChatAuthorBadgeRenderer.tooltip.toLowerCase();"owner"===e?(t.isOwner=!0,t.cssClasses.push("owner")):"moderator"===e?(t.isMod=!0,t.cssClasses.push("mod")):(e.startsWith("member")||"new member"===e)&&(t.isMember=!0,t.cssClasses.push("mem"))}return t}function h(e,t=[]){const n=e?u(e):"";return`<span class="${["msg",...t].join(" ")}">${n}</span>`}r.default.extend(i.default)},353:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",s="second",r="minute",i="hour",a="day",o="week",u="month",c="quarter",h="year",l="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},p=function(e,t,n){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(n)+e},$={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),s=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+p(s,2,"0")+":"+p(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var s=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(s,u),i=n-r<0,a=t.clone().add(s+(i?-1:1),u);return+(-(s+(n-r)/(i?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:h,w:o,d:a,D:l,h:i,m:r,s,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},M="en",y={};y[M]=g;var v="$isDayjsObject",S=function(e){return e instanceof T||!(!e||!e[v])},b=function e(t,n,s){var r;if(!t)return M;if("string"==typeof t){var i=t.toLowerCase();y[i]&&(r=i),n&&(y[i]=n,r=i);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var o=t.name;y[o]=t,r=o}return!s&&r&&(M=r),r||!s&&M},w=function(e,t){if(S(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},C=$;C.l=b,C.i=S,C.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function g(e){this.$L=b(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var p=g.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(f);if(s){var r=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return C},p.isValid=function(){return!(this.$d.toString()===d)},p.isSame=function(e,t){var n=w(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return w(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<w(e)},p.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var n=this,c=!!C.u(t)||t,d=C.p(e),f=function(e,t){var s=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?s:s.endOf(a)},m=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,p=this.$M,$=this.$D,M="set"+(this.$u?"UTC":"");switch(d){case h:return c?f(1,0):f(31,11);case u:return c?f(1,p):f(0,p+1);case o:var y=this.$locale().weekStart||0,v=(g<y?g+7:g)-y;return f(c?$-v:$+(6-v),p);case a:case l:return m(M+"Hours",0);case i:return m(M+"Minutes",1);case r:return m(M+"Seconds",2);case s:return m(M+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,t){var o,c=C.p(e),d="set"+(this.$u?"UTC":""),f=(o={},o[a]=d+"Date",o[l]=d+"Date",o[u]=d+"Month",o[h]=d+"FullYear",o[i]=d+"Hours",o[r]=d+"Minutes",o[s]=d+"Seconds",o[n]=d+"Milliseconds",o)[c],m=c===a?this.$D+(t-this.$W):t;if(c===u||c===h){var g=this.clone().set(l,1);g.$d[f](m),g.init(),this.$d=g.set(l,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[C.p(e)]()},p.add=function(n,c){var l,d=this;n=Number(n);var f=C.p(c),m=function(e){var t=w(d);return C.w(t.date(t.date()+Math.round(e*n)),d)};if(f===u)return this.set(u,this.$M+n);if(f===h)return this.set(h,this.$y+n);if(f===a)return m(1);if(f===o)return m(7);var g=(l={},l[r]=e,l[i]=t,l[s]=1e3,l)[f]||1,p=this.$d.getTime()+n*g;return C.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var s=e||"YYYY-MM-DDTHH:mm:ssZ",r=C.z(this),i=this.$H,a=this.$m,o=this.$M,u=n.weekdays,c=n.months,h=n.meridiem,l=function(e,n,r,i){return e&&(e[n]||e(t,s))||r[n].slice(0,i)},f=function(e){return C.s(i%12||12,e,"0")},g=h||function(e,t,n){var s=e<12?"AM":"PM";return n?s.toLowerCase():s};return s.replace(m,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return o+1;case"MM":return C.s(o+1,2,"0");case"MMM":return l(n.monthsShort,o,c,3);case"MMMM":return l(c,o);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return l(n.weekdaysMin,t.$W,u,2);case"ddd":return l(n.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return g(i,a,!0);case"A":return g(i,a,!1);case"m":return String(a);case"mm":return C.s(a,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(n,l,d){var f,m=this,g=C.p(l),p=w(n),$=(p.utcOffset()-this.utcOffset())*e,M=this-p,y=function(){return C.m(m,p)};switch(g){case h:f=y()/12;break;case u:f=y();break;case c:f=y()/3;break;case o:f=(M-$)/6048e5;break;case a:f=(M-$)/864e5;break;case i:f=M/t;break;case r:f=M/e;break;case s:f=M/1e3;break;default:f=M}return d?f:C.a(f)},p.daysInMonth=function(){return this.endOf(u).$D},p.$locale=function(){return y[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),s=b(e,t,!0);return s&&(n.$L=s),n},p.clone=function(){return C.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},g}(),k=T.prototype;return w.prototype=k,[["$ms",n],["$s",s],["$m",r],["$H",i],["$W",a],["$M",u],["$y",h],["$D",l]].forEach(function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),w.extend=function(e,t){return e.$i||(e(t,T,w),e.$i=!0),w},w.locale=b,w.isDayjs=S,w.unix=function(e){return w(1e3*e)},w.en=y[M],w.Ls=y,w.p={},w}()},522:function(e){e.exports=function(){"use strict";var e,t,n=1e3,s=6e4,r=36e5,i=864e5,a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=31536e6,u=2628e6,c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:o,months:u,days:i,hours:r,minutes:s,seconds:n,milliseconds:1,weeks:6048e5},l=function(e){return e instanceof M},d=function(e,t,n){return new M(e,n,t.$l)},f=function(e){return t.p(e)+"s"},m=function(e){return e<0},g=function(e){return m(e)?Math.ceil(e):Math.floor(e)},p=function(e){return Math.abs(e)},$=function(e,t){return e?m(e)?{negative:!0,format:""+p(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},M=function(){function m(e,t,n){var s=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return d(e*h[f(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach(function(t){s.$d[f(t)]=e[t]}),this.calMilliseconds(),this;if("string"==typeof e){var r=e.match(c);if(r){var i=r.slice(2).map(function(e){return null!=e?Number(e):0});return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var p=m.prototype;return p.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(t,n){return t+(e.$d[n]||0)*h[n]},0)},p.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=g(e/o),e%=o,this.$d.months=g(e/u),e%=u,this.$d.days=g(e/i),e%=i,this.$d.hours=g(e/r),e%=r,this.$d.minutes=g(e/s),e%=s,this.$d.seconds=g(e/n),e%=n,this.$d.milliseconds=e},p.toISOString=function(){var e=$(this.$d.years,"Y"),t=$(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var s=$(n,"D"),r=$(this.$d.hours,"H"),i=$(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3,a=Math.round(1e3*a)/1e3);var o=$(a,"S"),u=e.negative||t.negative||s.negative||r.negative||i.negative||o.negative,c=r.format||i.format||o.format?"T":"",h=(u?"-":"")+"P"+e.format+t.format+s.format+c+r.format+i.format+o.format;return"P"===h||"-P"===h?"P0D":h},p.toJSON=function(){return this.toISOString()},p.format=function(e){var n=e||"YYYY-MM-DDTHH:mm:ss",s={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return n.replace(a,function(e,t){return t||String(s[e])})},p.as=function(e){return this.$ms/h[f(e)]},p.get=function(e){var t=this.$ms,n=f(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?g(t/h[n]):this.$d[n],t||0},p.add=function(e,t,n){var s;return s=t?e*h[f(t)]:l(e)?e.$ms:d(e,this).$ms,d(this.$ms+s*(n?-1:1),this)},p.subtract=function(e,t){return this.add(e,t,!0)},p.locale=function(e){var t=this.clone();return t.$l=e,t},p.clone=function(){return d(this.$ms,this)},p.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},p.valueOf=function(){return this.asMilliseconds()},p.milliseconds=function(){return this.get("milliseconds")},p.asMilliseconds=function(){return this.as("milliseconds")},p.seconds=function(){return this.get("seconds")},p.asSeconds=function(){return this.as("seconds")},p.minutes=function(){return this.get("minutes")},p.asMinutes=function(){return this.as("minutes")},p.hours=function(){return this.get("hours")},p.asHours=function(){return this.as("hours")},p.days=function(){return this.get("days")},p.asDays=function(){return this.as("days")},p.weeks=function(){return this.get("weeks")},p.asWeeks=function(){return this.as("weeks")},p.months=function(){return this.get("months")},p.asMonths=function(){return this.as("months")},p.years=function(){return this.get("years")},p.asYears=function(){return this.as("years")},m}(),y=function(e,t,n){return e.add(t.years()*n,"y").add(t.months()*n,"M").add(t.days()*n,"d").add(t.hours()*n,"h").add(t.minutes()*n,"m").add(t.seconds()*n,"s").add(t.milliseconds()*n,"ms")};return function(n,s,r){e=r,t=r().$utils(),r.duration=function(e,t){var n=r.locale();return d(e,{$l:n},t)},r.isDuration=l;var i=s.prototype.add,a=s.prototype.subtract;s.prototype.add=function(e,t){return l(e)?y(this,e,1):i.bind(this)(e,t)},s.prototype.subtract=function(e,t){return l(e)?y(this,e,-1):a.bind(this)(e,t)}}}()},725:(e,t)=>{"use strict";function n(e){const t=document.getElementById("error");t&&(t.className=e.length?"show":"",t.innerHTML=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setErrorMsg=n,t.clearErrorMsg=function(){n("")}}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}(()=>{"use strict";const e=n(725),t=n(171),s=n(337),r={loadedFile:"",allChats:[],filteredChats:[],currentPage:1,limitPerPage:1500,runningStats:{numChatMessages:0,numMemberChats:0,numModChats:0,numOwnerChats:0,numGreyChats:0,numGiftPurchases:0,totalGiftsPurchased:0,totalGiftsRedeemed:0,numMembershipJoins:0,numMilestoneMessages:0,numSuperchats:0,numSuperStickers:0,colourTotals:{red:0,pink:0,orange:0,yellow:0,"light-green":0,"light-blue":0,blue:0},currencyTotals:{}},userStats:{},aggregateStats:{chatsPerUser:0,pctMembers:0,pctMemberChats:0}};function i(e){e.preventDefault();const t=document.getElementById("filter-type");if(!(t&&t instanceof HTMLSelectElement))throw new Error("Filter type dropdown not found");const n=document.getElementById("search-text");if(!(n&&n instanceof HTMLInputElement))throw new Error("Search text box not found");const s=n.value.toLowerCase();r.filteredChats=r.allChats.filter(e=>!("moderators"===t.value&&!e.isMod&&!e.isOwner)&&!!("monetized"!==t.value||e.isSuperChat||e.isSuperSticker||e.isMembershipGift||e.isMembershipRedemption||e.isMembershipMessage)&&(""===s||e.textContent.toLowerCase().includes(s)||e.userName.toLowerCase().includes(s))),r.currentPage=1,a()}function a(){const e=document.getElementById("chat");if(!e)return;e.innerHTML="",scrollTo(0,0);const t=(r.currentPage-1)*r.limitPerPage,n=t+r.limitPerPage;for(let s=t;s<n&&s<r.filteredChats.length;s++){const t=document.createElement("div");t.className="item",t.innerHTML=r.filteredChats[s].htmlLine,e.appendChild(t)}!function(){const e=document.getElementById("page-indicator");e&&(e.textContent=`Page ${r.currentPage}/${o()}`)}()}function o(){return Math.ceil(r.filteredChats.length/r.limitPerPage)}function u(e){e>0&&r.currentPage>=o()||e<0&&r.currentPage<=1||(r.currentPage+=e,a())}function c(){u(-1)}function h(){u(1)}(async()=>{const n=document.getElementById("json-file");if(!(n&&n instanceof HTMLInputElement))throw new Error("File element not found");const o=document.getElementById("prev-page");if(!(o&&o instanceof HTMLButtonElement))throw new Error("Prev page button not found");o.addEventListener("click",c,!1);const u=document.getElementById("next-page");if(!(u&&u instanceof HTMLButtonElement))throw new Error("Next page button not found");u.addEventListener("click",h,!1);const l=document.getElementById("filter-form");if(!(l&&l instanceof HTMLFormElement))throw new Error("Filters form not found");l.addEventListener("submit",i,!1),n.addEventListener("change",()=>{if(function(){r.loadedFile="",r.allChats=[],r.filteredChats=[],r.currentPage=1,r.runningStats={numChatMessages:0,numMemberChats:0,numModChats:0,numOwnerChats:0,numGreyChats:0,numGiftPurchases:0,totalGiftsPurchased:0,totalGiftsRedeemed:0,numMembershipJoins:0,numMilestoneMessages:0,numSuperchats:0,numSuperStickers:0,colourTotals:{red:0,pink:0,orange:0,yellow:0,"light-green":0,"light-blue":0,blue:0},currencyTotals:{}},r.userStats={},r.aggregateStats={chatsPerUser:0,pctMembers:0,pctMemberChats:0};const e=document.getElementById("chat");e&&(e.innerHTML="")}(),(0,e.clearErrorMsg)(),!n.files||!n.files.length)return;const i=n.files[0];if("application/json"!==i.type)return(0,e.setErrorMsg)("Error: Please choose a JSON file");(async function(e){const n=e.stream().pipeThrough(new TextDecoderStream).pipeThrough((0,t.getChunksToLinesTransform)()).getReader();for(;;){const{done:e,value:t}=await n.read();if(e||!t)break;try{const e=JSON.parse(t);(0,s.processChatMessage)(r,e)}catch(e){console.error(e)}}r.filteredChats=r.allChats.slice()})(i).then(a),console.log(r.runningStats),console.log(r.aggregateStats),console.log(r.userStats)},!1)})().catch(t=>{t&&(t&&"string"==typeof t.message?(0,e.setErrorMsg)(t.message):(0,e.setErrorMsg)(t.toString()))})})()})();